-----
TO DO
-----

ability to manually change orientation
view based on orienation

bullets can pass through entities, continue and hit others
organ hits, tissue layers

use the Y offset to deterime where the bullet intersects on the Y plane with the body part faces and use pythagoras
theorem to determine actual depth of bodypart from where the bullet is passing through

Ideal item action handling:

Event handler --> consumable.get_action -> Action -> consumable.activate
      ^        |             |
      |        V             V
      ------------------------

New Model With Queue

-> = calls

Event handler --> consumable.get_action -> action.consume_ap / queue action -> Action.perform -> consumable.activate
      ^        |             |                      |
      |        V             V                      V
      ------------------------            consumable.get_ap_cost

SQUAD MODE

event_handler.handle_events -> event_handler.handle_action -> action.handle_action -> engine.handle_queued_actions
                                                                                          (player end turn)
                                                                                                  |
     ----------------------------------------------------------------------------------------------
     |
     V
for action.handle_action for actions in action.queue -> perform / tick down


input handler: reload (consumables class) -> calls action -> reloads

After that trading and other party options - reloading, ammo priority etc. Ammo priority should be a property of the
magazine class itself.

Map Gen Algorithm
- fill map with walls
- make caverns, within cavern spaces, save positions carved out by the cavern algo and place random items and enemies there
    - modified random walk with 2x2 spaces but changing position by 1 space
    - dynamically resize map ? or just make it so that caverns can only start same amount of spaces from centre as
      maximum iterations / 2 or something
- make rooms
    - designates areas of the dungeon to perform BSP dungeon generation with and remove any cavern entities from this area
    - fill some with prefabs
    - fill with walls then fill with floors
    - connect representative room(s) from each BSP cluster to either the centre of a cavern or to another BSP cluster
- connect rooms with tunnels of varying widths

Extended Goals
-tactical and speed reloads
-grenades
-dialogue
-doors
-Trigger mods
-unique enemies which spawn once per game
-each weapon part has a value. Total value of the weapon determines if it will be included in future runs.
-in the dungeon you find enemies using your looted equipment from previous runs
-more room shapes on level generation
-weapon graphics
-tracer rounds (increase full auto accuracy)
-ability to trade with players directly adjacent to you
-random cover spawns in levels
-enemies have side weapons and limited ammo, can change weapons
-bullets going through enemies
-adjustable sights

-try reducing exe size - use UPX
-grave yard (call it cemetary)

dialogue
- reloading
- out of ammo
- death rattle
- pain
- badly injured
- killed enemy
- leg crippled
- arm crippled
- gun jammed
- idle
- builds gun
- squad member dies
- sees abomination
- enemies dead (room clear)
- enemy spotted

1.5 seconds average to draw, aim, shoot - pistol
can pull trigger 4 times per second

pistol base line - Glock 17
rifle base line - M4

equip (pistol - from holster) - 75
equip (rifle - from sling) - 100
acquire target (pistol) - 50
acquire target (rifle) - 30
shoot (pistol and rifle) -

recoil reduction
    stock - 45%
    handguard - 15%
    pistol grip - 10%
    additional 5-10% for rifle stocks with integrated pistol grip

ap distance cost modifier
    stock - 0.7
    hand guard - 0.9
    pistol grip -

spread reduction
    stock - 0.86
    handguard - 0.9
    pistol grip -

target acquisition ap
    stock - 0.75
    handguard - 0.8
    pistol grip -

Barrel
barrel_length =
velocity_modifier =
target_acquisition_ap=
equip_time =


Handguard / Forward Grip
spread_modifier =
felt_recoil =
target_acquisition_ap =
ap_distance_cost_modifier =

Sights
zero_range =
spread_modifier =
target_acquisition_ap =
sight_height_above_bore =
ap_distance_cost_modifier =

pistol grip
spread_modifier =
felt_recoil =
target_acquisition_ap =
ap_distance_cost_modifier =

Stock
felt_recoil =
ap_distance_cost_modifier =
spread_modifier =
target_acquisition_ap =
